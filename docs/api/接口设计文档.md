# ä¸ªäººåšå®¢ç³»ç»Ÿ API æ¥å£è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›®åç§° | ä¸ªäººåšå®¢ç³»ç»Ÿ                |
| -------- | --------------------------- |
| æ¥å£ç‰ˆæœ¬ | v1.0                        |
| åŸºç¡€ URL | `http://localhost:8080/api` |
| æ–‡æ¡£ç‰ˆæœ¬ | v1.0                        |
| æ›´æ–°æ—¶é—´ | 2024 å¹´                     |

## ğŸ“Š æ¥å£æ¦‚è§ˆ

### API è®¾è®¡è§„èŒƒ

- **RESTful é£æ ¼**: éµå¾ª REST è®¾è®¡åŸåˆ™
- **ç»Ÿä¸€å“åº”æ ¼å¼**: æ‰€æœ‰æ¥å£ä½¿ç”¨ç»Ÿä¸€çš„å“åº”ç»“æ„
- **JWT è®¤è¯**: ä½¿ç”¨ Bearer Token è¿›è¡Œèº«ä»½éªŒè¯
- **ç‰ˆæœ¬æ§åˆ¶**: URL ä¸­åŒ…å« API ç‰ˆæœ¬å·
- **é”™è¯¯å¤„ç†**: æ ‡å‡† HTTP çŠ¶æ€ç  + è‡ªå®šä¹‰é”™è¯¯ç 

### åŸºç¡€ URL ç»“æ„

```
https://your-domain.com/api/v1/
```

## ğŸ” è®¤è¯æ–¹å¼

### JWT Token è®¤è¯

```http
Authorization: Bearer <token>
```

### å…¬å¼€æ¥å£ï¼ˆæ— éœ€è®¤è¯ï¼‰

- æ–‡ç« åˆ—è¡¨æŸ¥è¯¢
- æ–‡ç« è¯¦æƒ…æŸ¥è¯¢
- åˆ†ç±»æ ‡ç­¾æŸ¥è¯¢
- è¯„è®ºæŸ¥è¯¢
- ç”¨æˆ·ç™»å½•

### ç§æœ‰æ¥å£ï¼ˆéœ€è¦è®¤è¯ï¼‰

- æ–‡ç« ç®¡ç†ï¼ˆå¢åˆ æ”¹ï¼‰
- è¯„è®ºç®¡ç†
- æ–‡ä»¶ä¸Šä¼ 
- ç³»ç»Ÿé…ç½®
- ç»Ÿè®¡æ•°æ®

## ğŸ“‹ ç»Ÿä¸€å“åº”æ ¼å¼

### æˆåŠŸå“åº”

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {}, // å…·ä½“æ•°æ®
  "timestamp": "2024-01-01T12:00:00Z"
}
```

### åˆ†é¡µå“åº”

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [], // æ•°æ®åˆ—è¡¨
    "total": 100, // æ€»è®°å½•æ•°
    "pages": 10, // æ€»é¡µæ•°
    "current": 1, // å½“å‰é¡µ
    "size": 10 // æ¯é¡µå¤§å°
  },
  "timestamp": "2024-01-01T12:00:00Z"
}
```

### é”™è¯¯å“åº”

```json
{
  "code": 400,
  "message": "è¯·æ±‚å‚æ•°é”™è¯¯",
  "data": null,
  "errors": ["å­—æ®µéªŒè¯é”™è¯¯è¯¦æƒ…"],
  "timestamp": "2024-01-01T12:00:00Z"
}
```

## ğŸ”‘ 1. ç”¨æˆ·è®¤è¯æ¨¡å—

### 1.1 ç”¨æˆ·ç™»å½•

```http
POST /api/v1/auth/login
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "username": "admin", // ç”¨æˆ·åï¼Œå¿…å¡«
  "password": "password", // å¯†ç ï¼Œå¿…å¡«
  "captcha": "abc123", // éªŒè¯ç ï¼Œå¿…å¡«
  "rememberMe": false // è®°ä½ç™»å½•ï¼Œå¯é€‰
}
```

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiJ9...",
    "expiresIn": 7200,
    "userInfo": {
      "id": 1,
      "username": "admin",
      "nickname": "ç®¡ç†å‘˜",
      "email": "admin@example.com",
      "avatar": "https://...",
      "roles": ["ADMIN"]
    }
  }
}
```

### 1.2 åˆ·æ–° Token

```http
POST /api/v1/auth/refresh
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiJ9..."
}
```

### 1.3 ç”¨æˆ·ç™»å‡º

```http
POST /api/v1/auth/logout
Authorization: Bearer <token>
```

### 1.4 è·å–ç”¨æˆ·ä¿¡æ¯

```http
GET /api/v1/auth/profile
Authorization: Bearer <token>
```

### 1.5 æ›´æ–°ç”¨æˆ·ä¿¡æ¯

```http
PUT /api/v1/auth/profile
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "nickname": "æ–°æ˜µç§°",
  "email": "new@example.com",
  "avatar": "https://...",
  "signature": "ä¸ªæ€§ç­¾å",
  "website": "https://...",
  "github": "https://github.com/...",
  "profession": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
  "introduction": "ä¸ªäººç®€ä»‹",
  "skills": ["Vue", "Java", "MySQL"]
}
```

## ğŸ“ 2. æ–‡ç« ç®¡ç†æ¨¡å—

### 2.1 è·å–æ–‡ç« åˆ—è¡¨

```http
GET /api/v1/articles
```

**æŸ¥è¯¢å‚æ•°ï¼š**

```
page=1              // é¡µç ï¼Œé»˜è®¤1
size=10             // æ¯é¡µå¤§å°ï¼Œé»˜è®¤10
keyword=æœç´¢å…³é”®è¯   // æœç´¢å…³é”®è¯ï¼Œå¯é€‰
categoryId=1        // åˆ†ç±»IDï¼Œå¯é€‰
tagId=1            // æ ‡ç­¾IDï¼Œå¯é€‰
status=1           // æ–‡ç« çŠ¶æ€ï¼Œå¯é€‰(1-å‘å¸ƒ,0-è‰ç¨¿)
isTop=0            // æ˜¯å¦ç½®é¡¶ï¼Œå¯é€‰
isRecommend=0      // æ˜¯å¦æ¨èï¼Œå¯é€‰
sort=createTime    // æ’åºå­—æ®µï¼Œå¯é€‰
order=desc         // æ’åºæ–¹å‘ï¼Œå¯é€‰(asc,desc)
```

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "title": "æ–‡ç« æ ‡é¢˜",
        "slug": "article-slug",
        "summary": "æ–‡ç« æ‘˜è¦",
        "coverImage": "https://...",
        "author": {
          "id": 1,
          "nickname": "ä½œè€…æ˜µç§°",
          "avatar": "https://..."
        },
        "category": {
          "id": 1,
          "name": "åˆ†ç±»åç§°",
          "slug": "category-slug"
        },
        "tags": [
          {
            "id": 1,
            "name": "æ ‡ç­¾åç§°",
            "color": "#409eff"
          }
        ],
        "status": 1,
        "isTop": 0,
        "isRecommend": 0,
        "isOriginal": 1,
        "viewCount": 100,
        "likeCount": 10,
        "commentCount": 5,
        "wordCount": 1500,
        "readingTime": 5,
        "publishedTime": "2024-01-01T12:00:00Z",
        "createTime": "2024-01-01T12:00:00Z",
        "updateTime": "2024-01-01T12:30:00Z"
      }
    ],
    "total": 100,
    "pages": 10,
    "current": 1,
    "size": 10
  }
}
```

### 2.2 è·å–æ–‡ç« è¯¦æƒ…

```http
GET /api/v1/articles/{id}
```

**è·¯å¾„å‚æ•°ï¼š**

- `id`: æ–‡ç«  ID

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 1,
    "title": "æ–‡ç« æ ‡é¢˜",
    "slug": "article-slug",
    "summary": "æ–‡ç« æ‘˜è¦",
    "content": "# æ–‡ç« å†…å®¹ï¼ˆMarkdownæ ¼å¼ï¼‰",
    "contentHtml": "<h1>æ–‡ç« å†…å®¹ï¼ˆHTMLæ ¼å¼ï¼‰</h1>",
    "coverImage": "https://...",
    "author": {
      "id": 1,
      "nickname": "ä½œè€…æ˜µç§°",
      "avatar": "https://..."
    },
    "category": {
      "id": 1,
      "name": "åˆ†ç±»åç§°",
      "slug": "category-slug"
    },
    "tags": [...],
    "status": 1,
    "isTop": 0,
    "isRecommend": 0,
    "isOriginal": 1,
    "allowComment": 1,
    "viewCount": 100,
    "likeCount": 10,
    "commentCount": 5,
    "wordCount": 1500,
    "readingTime": 5,
    "publishedTime": "2024-01-01T12:00:00Z",
    "seoTitle": "SEOæ ‡é¢˜",
    "seoDescription": "SEOæè¿°",
    "seoKeywords": "SEOå…³é”®è¯",
    "createTime": "2024-01-01T12:00:00Z",
    "updateTime": "2024-01-01T12:30:00Z"
  }
}
```

### 2.3 åˆ›å»ºæ–‡ç« 

```http
POST /api/v1/articles
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "title": "æ–‡ç« æ ‡é¢˜", // å¿…å¡«
  "slug": "article-slug", // å¯é€‰ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ
  "summary": "æ–‡ç« æ‘˜è¦", // å¯é€‰
  "content": "# æ–‡ç« å†…å®¹", // å¿…å¡«ï¼ŒMarkdownæ ¼å¼
  "coverImage": "https://...", // å¯é€‰
  "categoryId": 1, // å¿…å¡«
  "tagIds": [1, 2, 3], // å¯é€‰
  "status": 1, // å¯é€‰ï¼Œé»˜è®¤1
  "isTop": 0, // å¯é€‰ï¼Œé»˜è®¤0
  "isRecommend": 0, // å¯é€‰ï¼Œé»˜è®¤0
  "isOriginal": 1, // å¯é€‰ï¼Œé»˜è®¤1
  "allowComment": 1, // å¯é€‰ï¼Œé»˜è®¤1
  "password": "", // å¯é€‰ï¼ŒåŠ å¯†æ–‡ç« å¯†ç 
  "seoTitle": "SEOæ ‡é¢˜", // å¯é€‰
  "seoDescription": "SEOæè¿°", // å¯é€‰
  "seoKeywords": "å…³é”®è¯", // å¯é€‰
  "originalUrl": "åŸæ–‡é“¾æ¥" // å¯é€‰ï¼Œè½¬è½½æ–‡ç« 
}
```

### 2.4 æ›´æ–°æ–‡ç« 

```http
PUT /api/v1/articles/{id}
Authorization: Bearer <token>
```

### 2.5 åˆ é™¤æ–‡ç« 

```http
DELETE /api/v1/articles/{id}
Authorization: Bearer <token>
```

### 2.6 æ‰¹é‡åˆ é™¤æ–‡ç« 

```http
DELETE /api/v1/articles/batch
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "ids": [1, 2, 3]
}
```

### 2.7 æ–‡ç« ç‚¹èµ

```http
POST /api/v1/articles/{id}/like
```

### 2.8 è·å–ç›¸å…³æ–‡ç« 

```http
GET /api/v1/articles/{id}/related
```

### 2.9 è·å–çƒ­é—¨æ–‡ç« 

```http
GET /api/v1/articles/popular
```

## ğŸ·ï¸ 3. åˆ†ç±»æ ‡ç­¾æ¨¡å—

### 3.1 åˆ†ç±»ç®¡ç†

#### 3.1.1 è·å–åˆ†ç±»åˆ—è¡¨

```http
GET /api/v1/categories
```

**æŸ¥è¯¢å‚æ•°ï¼š**

```
includeCount=true   // æ˜¯å¦åŒ…å«æ–‡ç« æ•°é‡
status=1           // åˆ†ç±»çŠ¶æ€
```

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "name": "æŠ€æœ¯åˆ†äº«",
      "slug": "tech",
      "description": "æŠ€æœ¯ç›¸å…³æ–‡ç« ",
      "icon": "icon-tech",
      "coverImage": "https://...",
      "parentId": 0,
      "level": 1,
      "children": [
        {
          "id": 2,
          "name": "å‰ç«¯æŠ€æœ¯",
          "slug": "frontend",
          "parentId": 1,
          "level": 2,
          "articleCount": 10
        }
      ],
      "articleCount": 25,
      "sortOrder": 1,
      "status": 1,
      "createTime": "2024-01-01T12:00:00Z"
    }
  ]
}
```

#### 3.1.2 è·å–åˆ†ç±»è¯¦æƒ…

```http
GET /api/v1/categories/{id}
```

#### 3.1.3 åˆ›å»ºåˆ†ç±»

```http
POST /api/v1/categories
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "name": "åˆ†ç±»åç§°", // å¿…å¡«
  "slug": "category-slug", // å¯é€‰
  "description": "åˆ†ç±»æè¿°", // å¯é€‰
  "icon": "icon-name", // å¯é€‰
  "coverImage": "https://...", // å¯é€‰
  "parentId": 0, // å¯é€‰ï¼Œé»˜è®¤0
  "sortOrder": 1, // å¯é€‰ï¼Œé»˜è®¤0
  "seoTitle": "SEOæ ‡é¢˜", // å¯é€‰
  "seoDescription": "SEOæè¿°", // å¯é€‰
  "seoKeywords": "SEOå…³é”®è¯" // å¯é€‰
}
```

#### 3.1.4 æ›´æ–°åˆ†ç±»

```http
PUT /api/v1/categories/{id}
Authorization: Bearer <token>
```

#### 3.1.5 åˆ é™¤åˆ†ç±»

```http
DELETE /api/v1/categories/{id}
Authorization: Bearer <token>
```

### 3.2 æ ‡ç­¾ç®¡ç†

#### 3.2.1 è·å–æ ‡ç­¾åˆ—è¡¨

```http
GET /api/v1/tags
```

**æŸ¥è¯¢å‚æ•°ï¼š**

```
page=1              // é¡µç 
size=20             // æ¯é¡µå¤§å°
keyword=æœç´¢å…³é”®è¯   // æœç´¢å…³é”®è¯
orderBy=articleCount // æ’åºå­—æ®µ(name,articleCount,clickCount)
```

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "name": "Vue.js",
        "slug": "vuejs",
        "color": "#4FC08D",
        "description": "Vue.jsç›¸å…³",
        "articleCount": 15,
        "clickCount": 100,
        "createTime": "2024-01-01T12:00:00Z"
      }
    ],
    "total": 50,
    "pages": 3,
    "current": 1,
    "size": 20
  }
}
```

#### 3.2.2 è·å–æ ‡ç­¾äº‘

```http
GET /api/v1/tags/cloud
```

#### 3.2.3 åˆ›å»ºæ ‡ç­¾

```http
POST /api/v1/tags
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "name": "æ ‡ç­¾åç§°", // å¿…å¡«
  "slug": "tag-slug", // å¯é€‰
  "color": "#409eff", // å¯é€‰
  "description": "æ ‡ç­¾æè¿°" // å¯é€‰
}
```

#### 3.2.4 æ›´æ–°æ ‡ç­¾

```http
PUT /api/v1/tags/{id}
Authorization: Bearer <token>
```

#### 3.2.5 åˆ é™¤æ ‡ç­¾

```http
DELETE /api/v1/tags/{id}
Authorization: Bearer <token>
```

## ğŸ’¬ 4. è¯„è®ºç³»ç»Ÿæ¨¡å—

### 4.1 è·å–è¯„è®ºåˆ—è¡¨

```http
GET /api/v1/comments
```

**æŸ¥è¯¢å‚æ•°ï¼š**

```
articleId=1    // æ–‡ç« IDï¼Œå¿…å¡«
page=1         // é¡µç 
size=10        // æ¯é¡µå¤§å°
parentId=0     // çˆ¶è¯„è®ºIDï¼Œå¯é€‰
status=1       // è¯„è®ºçŠ¶æ€ï¼Œå¯é€‰
```

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "articleId": 1,
        "parentId": 0,
        "level": 1,
        "author": {
          "name": "è¯„è®ºè€…",
          "email": "user@example.com",
          "website": "https://...",
          "avatar": "https://...",
          "isAdmin": false
        },
        "content": "è¯„è®ºå†…å®¹",
        "contentHtml": "<p>è¯„è®ºå†…å®¹</p>",
        "likeCount": 5,
        "replyCount": 2,
        "status": 1,
        "isSticky": 0,
        "createTime": "2024-01-01T12:00:00Z",
        "children": [
          {
            "id": 2,
            "parentId": 1,
            "replyToId": 1,
            "level": 2,
            "author": {...},
            "content": "å›å¤å†…å®¹",
            "createTime": "2024-01-01T12:30:00Z"
          }
        ]
      }
    ],
    "total": 25,
    "pages": 3,
    "current": 1,
    "size": 10
  }
}
```

### 4.2 å‘è¡¨è¯„è®º

```http
POST /api/v1/comments
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "articleId": 1, // å¿…å¡«
  "parentId": 0, // å¯é€‰ï¼Œé»˜è®¤0
  "replyToId": 0, // å¯é€‰ï¼Œå›å¤çš„è¯„è®ºID
  "authorName": "è¯„è®ºè€…å§“å", // å¿…å¡«
  "authorEmail": "user@example.com", // å¿…å¡«
  "authorWebsite": "https://...", // å¯é€‰
  "content": "è¯„è®ºå†…å®¹", // å¿…å¡«
  "notifyEmail": true // å¯é€‰ï¼Œæ˜¯å¦é‚®ä»¶é€šçŸ¥
}
```

### 4.3 è¯„è®ºç‚¹èµ

```http
POST /api/v1/comments/{id}/like
```

### 4.4 åˆ é™¤è¯„è®º

```http
DELETE /api/v1/comments/{id}
Authorization: Bearer <token>
```

### 4.5 å®¡æ ¸è¯„è®º

```http
PUT /api/v1/comments/{id}/status
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "status": 1 // 1-é€šè¿‡ï¼Œ2-æ‹’ç»ï¼Œ3-åƒåœ¾è¯„è®º
}
```

### 4.6 æ‰¹é‡ç®¡ç†è¯„è®º

```http
PUT /api/v1/comments/batch
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "ids": [1, 2, 3],
  "action": "approve", // approve, reject, delete
  "status": 1 // å½“actionä¸ºapproveæ—¶ä½¿ç”¨
}
```

## ğŸ“ 5. æ–‡ä»¶ç®¡ç†æ¨¡å—

### 5.1 æ–‡ä»¶ä¸Šä¼ 

```http
POST /api/v1/files/upload
Authorization: Bearer <token>
Content-Type: multipart/form-data
```

**è¯·æ±‚å‚æ•°ï¼š**

```
file: æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®  // å¿…å¡«
type: image          // å¯é€‰ï¼Œæ–‡ä»¶ç±»å‹(image,document,video)
```

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "ä¸Šä¼ æˆåŠŸ",
  "data": {
    "id": 1,
    "originalName": "image.jpg",
    "fileName": "20240101_123456_abc123.jpg",
    "filePath": "/uploads/2024/01/01/",
    "fileUrl": "https://cdn.example.com/uploads/image.jpg",
    "fileType": "image",
    "fileExtension": "jpg",
    "fileSize": 1048576,
    "mimeType": "image/jpeg",
    "isPublic": 1,
    "createTime": "2024-01-01T12:00:00Z"
  }
}
```

### 5.2 è·å–æ–‡ä»¶åˆ—è¡¨

```http
GET /api/v1/files
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°ï¼š**

```
page=1           // é¡µç 
size=20          // æ¯é¡µå¤§å°
fileType=image   // æ–‡ä»¶ç±»å‹
keyword=æœç´¢å…³é”®è¯ // æ–‡ä»¶åæœç´¢
```

### 5.3 åˆ é™¤æ–‡ä»¶

```http
DELETE /api/v1/files/{id}
Authorization: Bearer <token>
```

### 5.4 æ‰¹é‡åˆ é™¤æ–‡ä»¶

```http
DELETE /api/v1/files/batch
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "ids": [1, 2, 3]
}
```

### 5.5 è·å–æ–‡ä»¶è¯¦æƒ…

```http
GET /api/v1/files/{id}
Authorization: Bearer <token>
```

## âš™ï¸ 6. ç³»ç»Ÿé…ç½®æ¨¡å—

### 6.1 è·å–é…ç½®åˆ—è¡¨

```http
GET /api/v1/configs
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°ï¼š**

```
group=site      // é…ç½®åˆ†ç»„
```

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "configGroup": "site",
      "configKey": "site_name",
      "configValue": "æˆ‘çš„ä¸ªäººåšå®¢",
      "configName": "ç½‘ç«™åç§°",
      "configDesc": "ç½‘ç«™æ ‡é¢˜",
      "configType": 1,
      "isSystem": 0,
      "status": 1
    }
  ]
}
```

### 6.2 è·å–å…¬å¼€é…ç½®

```http
GET /api/v1/configs/public
```

### 6.3 æ›´æ–°é…ç½®

```http
PUT /api/v1/configs
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "configs": [
    {
      "configKey": "site_name",
      "configValue": "æ–°çš„ç½‘ç«™åç§°"
    },
    {
      "configKey": "site_description",
      "configValue": "æ–°çš„ç½‘ç«™æè¿°"
    }
  ]
}
```

### 6.4 é‡ç½®é…ç½®

```http
POST /api/v1/configs/reset
Authorization: Bearer <token>
```

## ğŸ“Š 7. ç»Ÿè®¡åˆ†ææ¨¡å—

### 7.1 è·å–ä»ªè¡¨æ¿ç»Ÿè®¡

```http
GET /api/v1/statistics/dashboard
Authorization: Bearer <token>
```

**å“åº”æ•°æ®ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "overview": {
      "articleCount": 100,
      "commentCount": 500,
      "viewCount": 10000,
      "todayVisits": 50
    },
    "recentArticles": [...],
    "recentComments": [...],
    "popularArticles": [...],
    "visitTrend": {
      "dates": ["2024-01-01", "2024-01-02"],
      "visits": [100, 120],
      "views": [500, 600]
    }
  }
}
```

### 7.2 è·å–è®¿é—®ç»Ÿè®¡

```http
GET /api/v1/statistics/visits
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°ï¼š**

```
startDate=2024-01-01  // å¼€å§‹æ—¥æœŸ
endDate=2024-01-31    // ç»“æŸæ—¥æœŸ
articleId=1           // æ–‡ç« IDï¼Œå¯é€‰
```

### 7.3 è·å–æ–‡ç« ç»Ÿè®¡

```http
GET /api/v1/statistics/articles
Authorization: Bearer <token>
```

### 7.4 è®°å½•è®¿é—®

```http
POST /api/v1/statistics/visit
```

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "articleId": 1, // å¯é€‰
  "requestUrl": "/article/1",
  "referer": "https://...",
  "stayTime": 60 // åœç•™æ—¶é—´ï¼ˆç§’ï¼‰
}
```

## ğŸ“‹ é”™è¯¯ç å®šä¹‰

### HTTP çŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜                     |
| ------ | ------------------------ |
| 200    | è¯·æ±‚æˆåŠŸ                 |
| 201    | åˆ›å»ºæˆåŠŸ                 |
| 400    | è¯·æ±‚å‚æ•°é”™è¯¯             |
| 401    | æœªæˆæƒ/Token æ— æ•ˆ        |
| 403    | ç¦æ­¢è®¿é—®                 |
| 404    | èµ„æºä¸å­˜åœ¨               |
| 409    | èµ„æºå†²çª                 |
| 422    | è¯·æ±‚æ ¼å¼æ­£ç¡®ï¼Œä½†è¯­ä¹‰é”™è¯¯ |
| 500    | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯           |

### è‡ªå®šä¹‰é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜                     |
| ------ | ------------------------ |
| 1001   | ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯         |
| 1002   | éªŒè¯ç é”™è¯¯               |
| 1003   | Token å·²è¿‡æœŸ             |
| 1004   | Token æ— æ•ˆ               |
| 2001   | æ–‡ç« ä¸å­˜åœ¨               |
| 2002   | æ–‡ç« å·²åˆ é™¤               |
| 2003   | æ–‡ç« å¯†ç é”™è¯¯             |
| 3001   | åˆ†ç±»ä¸å­˜åœ¨               |
| 3002   | åˆ†ç±»ä¸‹è¿˜æœ‰æ–‡ç« ï¼Œæ— æ³•åˆ é™¤ |
| 4001   | è¯„è®ºä¸å­˜åœ¨               |
| 4002   | è¯„è®ºå·²å…³é—­               |
| 5001   | æ–‡ä»¶ä¸Šä¼ å¤±è´¥             |
| 5002   | æ–‡ä»¶ç±»å‹ä¸æ”¯æŒ           |
| 5003   | æ–‡ä»¶å¤§å°è¶…å‡ºé™åˆ¶         |

## ğŸ“ æ¥å£è°ƒç”¨ç¤ºä¾‹

### JavaScript/Axios ç¤ºä¾‹

```javascript
// è®¾ç½®åŸºç¡€URLå’Œæ‹¦æˆªå™¨
const api = axios.create({
  baseURL: "http://localhost:8080/api/v1",
  timeout: 10000,
});

// è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ Token
api.interceptors.request.use((config) => {
  const token = localStorage.getItem("token");
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨ - å¤„ç†é”™è¯¯
api.interceptors.response.use(
  (response) => response.data,
  (error) => {
    if (error.response?.status === 401) {
      // Tokenè¿‡æœŸï¼Œè·³è½¬ç™»å½•
      localStorage.removeItem("token");
      window.location.href = "/login";
    }
    return Promise.reject(error);
  }
);

// ä½¿ç”¨ç¤ºä¾‹
// è·å–æ–‡ç« åˆ—è¡¨
const getArticles = async (params) => {
  return await api.get("/articles", { params });
};

// åˆ›å»ºæ–‡ç« 
const createArticle = async (data) => {
  return await api.post("/articles", data);
};

// ä¸Šä¼ æ–‡ä»¶
const uploadFile = async (file) => {
  const formData = new FormData();
  formData.append("file", file);
  return await api.post("/files/upload", formData, {
    headers: { "Content-Type": "multipart/form-data" },
  });
};
```

### Java/Spring Boot ç¤ºä¾‹

```java
// ä½¿ç”¨RestTemplate
@Service
public class BlogApiService {

    @Autowired
    private RestTemplate restTemplate;

    private static final String API_BASE_URL = "http://localhost:8080/api/v1";

    public ApiResponse<PageResult<Article>> getArticles(int page, int size) {
        String url = API_BASE_URL + "/articles?page=" + page + "&size=" + size;
        return restTemplate.getForObject(url, ApiResponse.class);
    }

    public ApiResponse<Article> createArticle(Article article, String token) {
        HttpHeaders headers = new HttpHeaders();
        headers.setBearerAuth(token);
        headers.setContentType(MediaType.APPLICATION_JSON);

        HttpEntity<Article> request = new HttpEntity<>(article, headers);
        return restTemplate.postForObject(API_BASE_URL + "/articles", request, ApiResponse.class);
    }
}
```

## ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

### 1. è·¨åŸŸé…ç½®

åœ¨ Spring Boot ä¸­é…ç½® CORSï¼š

```java
@Configuration
public class CorsConfig {
    @Bean
    public CorsFilter corsFilter() {
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        CorsConfiguration config = new CorsConfiguration();
        config.setAllowCredentials(true);
        config.addAllowedOriginPattern("*");
        config.addAllowedHeader("*");
        config.addAllowedMethod("*");
        source.registerCorsConfiguration("/api/**", config);
        return new CorsFilter(source);
    }
}
```

### 2. æ¥å£æ–‡æ¡£é›†æˆ

ä½¿ç”¨ Swagger/OpenAPI ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼š

```java
@Configuration
@EnableOpenApi
public class SwaggerConfig {
    @Bean
    public OpenAPI blogOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("ä¸ªäººåšå®¢ç³»ç»ŸAPI")
                .version("v1.0")
                .description("ä¸ªäººåšå®¢ç³»ç»ŸRESTful APIæ¥å£æ–‡æ¡£"));
    }
}
```

è®¿é—®åœ°å€ï¼š`http://localhost:8080/swagger-ui/index.html`

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç¼“å­˜ç­–ç•¥

- æ–‡ç« åˆ—è¡¨ç¼“å­˜ï¼ˆRedisï¼Œ5 åˆ†é’Ÿï¼‰
- çƒ­é—¨æ–‡ç« ç¼“å­˜ï¼ˆRedisï¼Œ1 å°æ—¶ï¼‰
- åˆ†ç±»æ ‡ç­¾ç¼“å­˜ï¼ˆRedisï¼Œ30 åˆ†é’Ÿï¼‰
- ç³»ç»Ÿé…ç½®ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ï¼Œé‡å¯æ›´æ–°ï¼‰

### 2. åˆ†é¡µä¼˜åŒ–

- é»˜è®¤åˆ†é¡µå¤§å°ï¼š10
- æœ€å¤§åˆ†é¡µå¤§å°ï¼š100
- ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µä¼˜åŒ–å¤§æ•°æ®é‡æŸ¥è¯¢

### 3. æ¥å£é™æµ

- ç™»å½•æ¥å£ï¼š5 æ¬¡/åˆ†é’Ÿ
- è¯„è®ºæ¥å£ï¼š10 æ¬¡/åˆ†é’Ÿ
- æ–‡ä»¶ä¸Šä¼ ï¼š2 æ¬¡/åˆ†é’Ÿ
- å…¶ä»–æ¥å£ï¼š100 æ¬¡/åˆ†é’Ÿ

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2024 å¹´  
**ç»´æŠ¤å›¢é˜Ÿ**: åç«¯å¼€å‘ç»„  
**è”ç³»æ–¹å¼**: tech@example.com
